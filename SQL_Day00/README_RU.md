# Day 00 - Piscine SQL: SQL Fundamentals and Data Retrieval

## Обзор проекта

Этот день посвящен основам SQL. В рамках проекта решены 9 практических задач, охватывающих базовые конструкции SQL: выборка данных, фильтрация, сортировка, работа с датами, условные выражения и вложенные запросы.

## Теория: Основы SQL
### Ключевые концепции:
* **SELECT** - извлечение данных из таблиц
* **WHERE** - фильтрация строк по условиям
* **ORDER BY** - сортировка результатов
* **BETWEEN** - работа с диапазонами значений
* **CASE** - условные выражения
* **Подзапросы** - вложенные SQL-запросы
* **Агрегатные функции** - вычисления над группами строк

## База данных

### Схема базы данных

![schema](misc/images/schema.png)

### Описание таблиц

**`pizzeria`**
*Словарная таблица с доступными пиццериями*  
- `id` — первичный ключ  
- `name` — название пиццерии  
- `rating` — средний рейтинг пиццерии (от 0 до 5 баллов)  

**`person`**
*Словарная таблица с людьми, которые любят пиццу*  
- `id` — первичный ключ  
- `name` — имя человека  
- `age` — возраст человека  
- `gender` — пол человека  
- `address` — адрес человека  

**`menu`**
*Словарная таблица с доступным меню и ценами на пиццу*  
- `id` — первичный ключ  
- `pizzeria_id` — внешний ключ к таблице `pizzeria`  
- `pizza_name` — название пиццы в пиццерии  
- `price` — цена конкретной пиццы  

**`person_visits`**
*Операционная таблица с информацией о посещениях пиццерий*  
- `id` — первичный ключ  
- `person_id` — внешний ключ к таблице `person`  
- `pizzeria_id` — внешний ключ к таблице `pizzeria`  
- `visit_date` — дата посещения (например, `'2022-01-01'`)  

**`person_order`**
*Операционная таблица с информацией о заказах*  
- `id` — первичный ключ  
- `person_id` — внешний ключ к таблице `person`  
- `menu_id` — внешний ключ к таблице `menu`  
- `order_date` — дата заказа (например, `'2022-01-01'`)  


## Ключевые особенности

- 10 упражнений на освоение базового синтаксиса SQL  
- Работа с реляционной моделью данных на примере пиццерий  
- Использование ANSI SQL стандарта  
- Решение задач с ограничениями на использование определенных конструкций  
- Применение различных подходов к решению одинаковых задач  

## Задачи

### Exercise 00

**Задание:**  
Вернуть все имена и возраст людей из города `'Kazan'`.

---

### Exercise 01

**Задание:**  
Вернуть имена и возраст женщин из города `'Kazan'` с сортировкой по имени.

---

### Exercise 02

**Задание:**  
Вернуть названия пиццерий и их рейтинг (от **3.5 до 5 баллов включительно**) с сортировкой по рейтингу.

- **Первый запрос:** использовать операторы сравнения `<=`, `>=`  
- **Второй запрос:** использовать ключевое слово `BETWEEN`

---

### Exercise 03

**Задание:**  
Вернуть **уникальные идентификаторы людей**, которые:
- Посетили пиццерии в период с **6 по 9 января 2022** (включительно)  
**ИЛИ**
- Посетили пиццерию с `ID = 2`  

**Сортировка:** по ID человека в порядке убывания.

---

### Exercise 04

**Задание:**  
Создать вычисляемое поле `person_information` в формате:  
`Имя (age:возраст,gender:'пол',address:'адрес')`

**Пример:**  
`Anna (age:16,gender:'female',address:'Moscow')`

**Сортировка:** по вычисляемому полю в возрастающем порядке.

---

### Exercise 05

**Задание:**  
Вернуть **имена людей**, заказавших **меню с ID 13, 14 или 18** **7 января 2022**.

**Ограничения:**  
Запрещено использовать `IN` и `JOIN`.

**Шаблон решения:**
```sql
SELECT (SELECT ...) AS name
FROM ...
WHERE ...
```

---

### Exercise 06

**Задание:**
Дополнить решение Exercise 05 новым полем `check_name`:

* Возвращает `true`, если имя человека `'Denis'`
* Возвращает `false` в остальных случаях

**Ограничения:**
Запрещено использовать `IN` и `JOIN`.

---

### Exercise 07

**Задание:**
Вернуть для каждого человека:

* `ID`
* `Имя`
* Возрастную группу `interval_info` по правилам:

| Группа      | Условие                            |
| ----------- | ---------------------------------- |
| interval #1 | возраст **10–20 лет** включительно |
| interval #2 | возраст **21–23 года**             |
| interval #3 | остальные случаи                   |

**Сортировка:** по `interval_info` в возрастающем порядке.

---

### Exercise 08

**Задание:**
Вернуть все строки из таблицы `person_order`, где `ID` заказа является **чётным числом**.
**Сортировка:** по `ID` заказа.

---

### Exercise 09

**Задание:**
Вернуть **имена людей** и **названия пиццерий**, которые они посещали в период с **7 по 9 января 2022** (включительно).

**Ограничения:**
Запрещено использовать `JOIN`.

**Шаблон решения:**

```sql
SELECT 
  (SELECT ...) AS person_name,
  (SELECT ...) AS pizzeria_name
FROM (SELECT ... FROM person_visits WHERE ...) AS pv
ORDER BY ...
```

**Сортировка:**

* По имени человека (**по возрастанию**)
* По названию пиццерии (**по убыванию**)

## Технологии

- **PostgreSQL** – система управления реляционными базами данных  
- **ANSI SQL** – стандартизированный язык запросов  
- **psql / pgAdmin** – инструменты для работы с PostgreSQL  

## Как использовать

1. Установите PostgreSQL  
2. Создайте базу данных и выполните [script](materials/model.sql) инициализации  
3. Для каждого упражнения выполните соответствующий SQL-файл  
4. Результаты можно просмотреть в psql или pgAdmin  
